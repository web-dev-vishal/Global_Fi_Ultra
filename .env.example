# ===========================================
# Global-Fi Ultra - Environment Configuration
# ===========================================
# Copy this file to .env and fill in your values.
# All variables have sensible defaults for local development.

# ===========================================
# Server Configuration
# ===========================================
NODE_ENV=development
PORT=4000
HOST=localhost

# ===========================================
# Database (MongoDB)
# ===========================================
# Local: mongodb://localhost:27017/globalfi
# Atlas: mongodb+srv://user:password@cluster.mongodb.net/globalfi
MONGODB_URI=mongodb://localhost:27017/globalfi
MONGODB_POOL_SIZE=10

# ===========================================
# Redis (Optional - falls back to in-memory)
# ===========================================
REDIS_URL=redis://localhost:6379
REDIS_PASSWORD=
REDIS_TTL_DEFAULT=300

# ===========================================
# API Keys (Required for production)
# ===========================================

# Alpha Vantage - Stock quotes
# Get key at: https://www.alphavantage.co/support/#api-key/
ALPHA_VANTAGE_API_KEY=demo

# CoinGecko - Crypto prices (optional for free tier)
COINGECKO_API_KEY=

# NewsAPI - Financial news
# Get key at: https://newsapi.org/register
NEWS_API_KEY=your_newsapi_key_here

# FRED - Economic indicators
# Get key at: https://fred.stlouisfed.org/docs/api/api_key.html
FRED_API_KEY=your_fred_key_here

# Finnhub - Market news
# Get key at: https://finnhub.io/register
FINNHUB_API_KEY=your_finnhub_key_here

# ===========================================
# Security
# ===========================================
CORS_ORIGIN=http://localhost:3000,http://localhost:5173

# Global API rate limiting (applied to all /api/** routes)
# Window: 900000ms = 15 minutes, Max: 100 requests per window
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# Additional rate limiting tiers (configured in code, not via env vars):
# - Auth endpoints:              5 req / 15 min  (brute-force protection)
# - Authenticated user routes: 1000 req / 15 min  (CRUD on resources)
# - Admin endpoints:            20 req / 15 min  (admin operations)
# - AI endpoints:               10 req / 1 min   (LLM API cost control)
# - Health/readiness:         1000 req / 1 min   (monitoring tools)

# JWT Authentication (for future auth implementation)
# JWT_SECRET=your_super_secret_jwt_key_change_this_in_production
# JWT_EXPIRES_IN=7d

# ===========================================
# Circuit Breaker Configuration
# ===========================================
# Threshold: number of failures before circuit opens
# Timeout: per-request timeout in ms
# ResetTimeout: time before circuit tries half-open
CIRCUIT_BREAKER_THRESHOLD=3
CIRCUIT_BREAKER_TIMEOUT=30000
CIRCUIT_BREAKER_RESET_TIMEOUT=30000

# ===========================================
# Logging
# ===========================================
# Levels: error, warn, info, http, debug
LOG_LEVEL=info
LOG_FILE_PATH=./logs/app.log

# ===========================================
# Socket.io
# ===========================================
SOCKET_IO_CORS_ORIGIN=http://localhost:3000,http://localhost:5173

# ===========================================
# Feature Flags
# ===========================================
ENABLE_CACHE_WARMING=false
ENABLE_METRICS_COLLECTION=true

# ===========================================
# Message Queue (Optional - server starts without it)
# ===========================================
RABBITMQ_URL=amqp://localhost:5672
RABBITMQ_QUEUE_PREFIX=globalfi

# ===========================================
# Groq AI Configuration
# ===========================================
# Get your API key at: https://console.groq.com/keys
# Leave empty to disable AI features
GROQ_API_KEY=gsk_your_groq_api_key_here
GROQ_PRIMARY_MODEL=llama-3.3-70b-versatile
GROQ_FAST_MODEL=llama-3.1-8b-instant
